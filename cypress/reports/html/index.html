<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets\app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:1,&quot;tests&quot;:5,&quot;passes&quot;:5,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;testsRegistered&quot;:5,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false,&quot;start&quot;:&quot;2023-11-03T19:14:17.932Z&quot;,&quot;end&quot;:&quot;2023-11-03T19:15:18.182Z&quot;,&quot;duration&quot;:60250},&quot;results&quot;:[{&quot;uuid&quot;:&quot;4102be7b-f850-4c31-99eb-e0d8fd79c3da&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;cypress\\e2e\\almosafer.cy.js&quot;,&quot;file&quot;:&quot;cypress\\e2e\\almosafer.cy.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;cb969b4a-bfd8-45f6-9d5f-95fdf8ab680b&quot;,&quot;title&quot;:&quot;almosafer&quot;,&quot;fullFile&quot;:&quot;cypress\\e2e\\almosafer.cy.js&quot;,&quot;file&quot;:&quot;cypress\\e2e\\almosafer.cy.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Select Origin and Destination&quot;,&quot;fullTitle&quot;:&quot;almosafer Select Origin and Destination&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:34766,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// to make sure the lang in url includes /en, if not change the language from the button\ncy.url().then(url =&gt; {\n  // we got here already redirect 302 and have parameters and page lang\n  if (!url.includes(&#x27;/en&#x27;)) {\n    cy.get(&#x27;[data-testid=\&quot;Header__LanguageSwitch\&quot;]&#x27;).click();\n  }\n});\n// close SAR/USD popup\ncy.get(&#x27;.cta__saudi&#x27;).click();\n// using const, var is not the best practice but this is a way to choose random data search from fixture file, using it was for the time of challenge so i belive i can do best than this\nconst origrion = data.origrion;\nconst randomOrigrion = Cypress._.random(0, origrion.length - 1);\nconst randomOrigrionItem = origrion[randomOrigrion];\n// wait to end the search for the search key\ncy.intercept(\&quot;GET\&quot;, `/api/v3/flights/service/shazam/api/search?query=${randomOrigrionItem}`).as(&#x27;getSearchResult&#x27;);\ncy.get(&#x27;[data-testid=\&quot;FlightSearchBox__FromAirportInput\&quot;]&#x27;).type(randomOrigrionItem);\ncy.wait(&#x27;@getSearchResult&#x27;).its(&#x27;response.statusCode&#x27;).should(&#x27;eq&#x27;, 200);\n//select item in origion \ncy.get(&#x27;[data-testid=\&quot;AutoCompleteResultsList\&quot;]&#x27;).find(`span:contains(\&quot;${randomOrigrionItem}\&quot;)`).first().as(&#x27;trip1&#x27;);\ncy.get(&#x27;@trip1&#x27;).should(&#x27;have.text&#x27;, randomOrigrionItem).click();\nconst destination = data.destination;\nconst randomDestination = Cypress._.random(0, destination.length - 1);\nconst randomDestinationItem = destination[randomDestination];\n// wait to end the search for the search key\ncy.intercept(\&quot;GET\&quot;, `/api/v3/flights/service/shazam/api/search?query=${randomDestinationItem}`).as(&#x27;getSearchResult2&#x27;);\ncy.get(&#x27;[data-testid=\&quot;FlightSearchBox__ToAirportInput\&quot;]&#x27;).type(randomDestinationItem);\ncy.wait(&#x27;@getSearchResult2&#x27;).its(&#x27;response.statusCode&#x27;).should(&#x27;eq&#x27;, 200);\n//select item in origion\ncy.get(&#x27;[data-testid=\&quot;AutoCompleteResultsList\&quot;]&#x27;).find(`span:contains(\&quot;${randomDestinationItem}\&quot;)`).first().as(&#x27;trip2&#x27;);\ncy.get(&#x27;@trip2&#x27;).should(&#x27;have.text&#x27;, randomDestinationItem).click();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b8daaf24-aeff-406c-9f27-eec91ae3bb49&quot;,&quot;parentUUID&quot;:&quot;cb969b4a-bfd8-45f6-9d5f-95fdf8ab680b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Select Dates&quot;,&quot;fullTitle&quot;:&quot;almosafer Select Dates&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:945,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// this is small system for the range of trip so we can add the range from fixture file from keys [goDate,backDay] (make it randomly by selected range)\nconst currentDate = new Date();\ncurrentDate.setDate(currentDate.getDate() + data.goDate);\n// Get the current year (YYYY)\nconst currentYear = currentDate.getFullYear().toString();\n// Get the current month (0-11)\nconst currentMonth = currentDate.getMonth();\n// Get the current date (YYYY-MM-dd)\nconst currentFormattedDate = `${currentYear}-${(currentMonth + 1).toString().padStart(2, &#x27;0&#x27;)}-${currentDate.getDate().toString().padStart(2, &#x27;0&#x27;)}`;\nconst returnDate = new Date();\nreturnDate.setDate(returnDate.getDate() + data.backDay);\n// Get the current year (YYYY)\nconst returnYear = returnDate.getFullYear().toString();\n// Get the current month (0-11)\nconst returnMonth = returnDate.getMonth();\n// Get the current date (YYYY-MM-dd)\nconst returnFormattedDate = `${returnYear}-${(returnMonth + 1).toString().padStart(2, &#x27;0&#x27;)}-${returnDate.getDate().toString().padStart(2, &#x27;0&#x27;)}`;\n// Log the values for demonstration\n// clendar elements for origion\ncy.get(&#x27;[data-testid=\&quot;FlightSearchBox__FromDateButton\&quot;]&#x27;).click();\n// origion year value 2023 - 2024\ncy.get(&#x27;[data-testid=\&quot;FlightSearchCalendar__YearDropdown\&quot;]&#x27;).first().select(currentYear);\n// origion month     value 0-11\ncy.get(&#x27;[data-testid=\&quot;FlightSearchCalendar__MonthDropdown\&quot;]&#x27;).first().select(currentMonth);\n// origion day in calendar \ncy.get(`[data-testid=\&quot;FlightSearchCalendar__${currentFormattedDate}\&quot;]`).first().click();\n// clendar elements for return\ncy.get(&#x27;[data-testid=\&quot;FlightSearchCalendar__YearDropdown\&quot;]&#x27;).last().select(returnYear);\n// /// return month     value 0-11\ncy.get(&#x27;[data-testid=\&quot;FlightSearchCalendar__MonthDropdown\&quot;]&#x27;).last().select(returnMonth);\n// // return day in calendar \ncy.get(`[data-testid=\&quot;FlightSearchCalendar__${returnFormattedDate}\&quot;]`).last().click();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9c2b3b90-0d3c-4419-81eb-3b5147916e23&quot;,&quot;parentUUID&quot;:&quot;cb969b4a-bfd8-45f6-9d5f-95fdf8ab680b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Select Cabin Type and Passengers&quot;,&quot;fullTitle&quot;:&quot;almosafer Select Cabin Type and Passengers&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:1006,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;/// the defult value is Economy but it should to pass the proccess and i make it dynamic with the others options\nfunction passengerType(ticketType) {\n  cy.get(&#x27;[data-testid=\&quot;FlightSearchBox__CabinTypeDropdown\&quot;]&#x27;).click();\n  cy.get(`[data-testid=\&quot;FlightSearchCabinSelection__${ticketType.split(&#x27; &#x27;).join(&#x27;&#x27;)}Option\&quot;]`).click();\n  cy.get(&#x27;#uncontrolled-tab-example-tabpane-flights &gt; div &gt; div:nth-child(2) &gt; div &gt; div &gt; div &gt; div &gt; div &gt; div &gt; span&#x27;).should(&#x27;include.text&#x27;, ticketType.split(&#x27; &#x27;)[0]);\n}\npassengerType(data.passengertype);\n// passengers section start\n// i try to do it responsive as posseble to add cheldren or infants from fixture file for more test cases\ncy.get(&#x27;[data-testid=\&quot;FlightSearchBox__PaxDropdown\&quot;]&#x27;).click();\n//assert adults defult value\n// adoult/s number\nfunction adultsCounter(num) {\n  // verify counter finctions (increase ,decreas , counter)\n  cy.get(&#x27;[data-testid=\&quot;FlightSearchPAXSelection__AdultsCountLabel\&quot;]&#x27;).invoke(&#x27;text&#x27;).then(text =&gt; {\n    cy.get(&#x27;[data-testid=\&quot;FlightSearchPAXSelection__AdultsPlusButton\&quot;]&#x27;).click();\n    cy.get(&#x27;[data-testid=\&quot;FlightSearchPAXSelection__AdultsMinusButton\&quot;]&#x27;).click();\n    cy.get(&#x27;[data-testid=\&quot;FlightSearchPAXSelection__AdultsCountLabel\&quot;]&#x27;).should(&#x27;have.text&#x27;, text);\n    if (num &gt; text) {\n      for (let i = Number(text); i &lt; num; i++) {\n        // if (num == 1) {\n        //   break\n        // }\n        cy.get(&#x27;[data-testid=\&quot;FlightSearchPAXSelection__AdultsPlusButton\&quot;]&#x27;).click();\n        // assert if the adding reflect on the counter\n        cy.get(&#x27;[data-testid=\&quot;FlightSearchPAXSelection__AdultsCountLabel\&quot;]&#x27;).should(&#x27;have.text&#x27;, i + Number(text));\n      }\n    }\n    if (num &lt; text) {\n      cy.get(&#x27;[data-testid=\&quot;FlightSearchPAXSelection__AdultsMinusButton\&quot;]&#x27;).click();\n      cy.get(&#x27;[data-testid=\&quot;FlightSearchPAXSelection__AdultsCountLabel\&quot;]&#x27;).should(&#x27;have.text&#x27;, 0);\n    }\n  });\n}\nadultsCounter(data.adultsPassengerNumber);\n// cheldren number\nfunction cheldrenCounter(num) {\n  // verify counter finctions (increase ,decreas , counter)\n  cy.get(&#x27;[data-testid=\&quot;FlightSearchPAXSelection__ChildrenCountLabel\&quot;]&#x27;).invoke(&#x27;text&#x27;).then(text =&gt; {\n    cy.get(&#x27;[data-testid=\&quot;FlightSearchPAXSelection__ChildrenPlusButton\&quot;]&#x27;).click();\n    cy.get(&#x27;[data-testid=\&quot;FlightSearchPAXSelection__ChildrenMinusButton\&quot;]&#x27;).click();\n    cy.get(&#x27;[data-testid=\&quot;FlightSearchPAXSelection__ChildrenCountLabel\&quot;]&#x27;).should(&#x27;have.text&#x27;, text);\n    if (num &gt; text) {\n      for (let i = Number(text) + 1; i &lt; num + 1; i++) {\n        cy.get(&#x27;[data-testid=\&quot;FlightSearchPAXSelection__ChildrenPlusButton\&quot;]&#x27;).click();\n        // assert if the adding reflect on the counter\n        cy.get(&#x27;[data-testid=\&quot;FlightSearchPAXSelection__ChildrenCountLabel\&quot;]&#x27;).should(&#x27;have.text&#x27;, i + Number(text));\n      }\n    }\n    if (num &lt; text) {\n      cy.get(&#x27;[data-testid=\&quot;FlightSearchPAXSelection__ChildrenMinusButton\&quot;]&#x27;).click();\n      cy.get(&#x27;[data-testid=\&quot;FlightSearchPAXSelection__ChildrenCountLabel\&quot;]&#x27;).should(&#x27;have.text&#x27;, 0);\n    }\n  });\n}\ncheldrenCounter(data.cheldrenPassengerNumber);\n// infants number\nfunction infantsCounter(num) {\n  // verify counter finctions (increase ,decreas , counter)\n  cy.get(&#x27;[data-testid=\&quot;FlightSearchPAXSelection__InfantsCountLabel\&quot;]&#x27;).invoke(&#x27;text&#x27;).then(text =&gt; {\n    cy.get(&#x27;[data-testid=\&quot;FlightSearchPAXSelection__InfantsPlusButton\&quot;]&#x27;).click();\n    cy.get(&#x27;[data-testid=\&quot;FlightSearchPAXSelection__InfantsMinusButton\&quot;]&#x27;).click();\n    cy.get(&#x27;[data-testid=\&quot;FlightSearchPAXSelection__InfantsCountLabel\&quot;]&#x27;).should(&#x27;have.text&#x27;, text);\n    if (num &gt; text) {\n      for (let i = Number(text) + 1; i &lt; num + 1; i++) {\n        // if (num == 1) {\n        //   break\n        // }\n        cy.get(&#x27;[data-testid=\&quot;FlightSearchPAXSelection__InfantsPlusButton\&quot;]&#x27;).click();\n        // assert if the adding reflect on the counter\n        cy.get(&#x27;[data-testid=\&quot;FlightSearchPAXSelection__InfantsCountLabel\&quot;]&#x27;).should(&#x27;have.text&#x27;, i + Number(text));\n      }\n    }\n    if (num &lt; text) {\n      cy.get(&#x27;[data-testid=\&quot;FlightSearchPAXSelection__InfantsMinusButton\&quot;]&#x27;).click();\n      cy.get(&#x27;[data-testid=\&quot;FlightSearchPAXSelection__InfantsCountLabel\&quot;]&#x27;).should(&#x27;have.text&#x27;, text);\n    }\n  });\n}\ninfantsCounter(data.infantsPassengerNumber);\n// close brop downlist\ncy.get(&#x27;[data-testid=\&quot;FlightSearchBox__PaxDropdown\&quot;]&#x27;).click();\n// passenger section end&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;125a9425-eed8-456c-a3f2-c6838b9c31f5&quot;,&quot;parentUUID&quot;:&quot;cb969b4a-bfd8-45f6-9d5f-95fdf8ab680b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Search for Flights&quot;,&quot;fullTitle&quot;:&quot;almosafer Search for Flights&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:18785,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;cy.get(&#x27;[data-testid=\&quot;FlightSearchBox__SearchButton\&quot;]&#x27;).first().click();\ncy.intercept(\&quot;POST\&quot;, &#x27;/api/v3/flights/flight/async-search-result&#x27;).as(&#x27;getData&#x27;);\ncy.intercept(\&quot;POST\&quot;, &#x27;https://api2.branch.io/v1/pageview&#x27;).as(&#x27;getData2&#x27;);\ncy.wait(&#x27;@getData&#x27;, {\n  timeout: 20000\n}).its(&#x27;response.statusCode&#x27;).should(&#x27;eq&#x27;, 200);\ncy.wait(&#x27;@getData2&#x27;, {\n  timeout: 20000\n}).its(&#x27;response.statusCode&#x27;).should(&#x27;eq&#x27;, 200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d412d812-7aff-479f-9260-6963ca2a1f2b&quot;,&quot;parentUUID&quot;:&quot;cb969b4a-bfd8-45f6-9d5f-95fdf8ab680b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Sort Flights&quot;,&quot;fullTitle&quot;:&quot;almosafer Sort Flights&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:4523,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// its already selected but to its required \ncy.get(&#x27;[data-testid=\&quot;Cheapest__SortBy__selected\&quot;]&#x27;, {\n  timeout: 20000\n}).as(\&quot;searCheabestButton\&quot;);\n// find the value for the first item, we can do it with more then one way\ncy.get(&#x27;[data-testid*=\&quot;_container\&quot;]&#x27;).first().find(&#x27;[data-testid*=\&quot;__PriceLabel\&quot;]&#x27;).first().as(&#x27;cheapestPrice&#x27;);\n// assert the cheapist value in the button equal the fitst value in first showed item \ncy.get(&#x27;@cheapestPrice&#x27;).invoke(&#x27;text&#x27;).then(text =&gt; {\n  cy.get(&#x27;[data-testid=\&quot;Cheapest__SortBy__selected\&quot;]&#x27;).find(&#x27;span:contains(\&quot;Cheapest\&quot;)&#x27;).find(&#x27;div:contains(\&quot;\&quot;)&#x27;).should(&#x27;contains.text&#x27;, text);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;48840aa9-5279-4f48-98d2-94b4aed63bfd&quot;,&quot;parentUUID&quot;:&quot;cb969b4a-bfd8-45f6-9d5f-95fdf8ab680b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b8daaf24-aeff-406c-9f27-eec91ae3bb49&quot;,&quot;9c2b3b90-0d3c-4419-81eb-3b5147916e23&quot;,&quot;125a9425-eed8-456c-a3f2-c6838b9c31f5&quot;,&quot;d412d812-7aff-479f-9260-6963ca2a1f2b&quot;,&quot;48840aa9-5279-4f48-98d2-94b4aed63bfd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:60025,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;7.0.1&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:false,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;options&quot;:{&quot;overwrite&quot;:false,&quot;html&quot;:false,&quot;json&quot;:true,&quot;reportDir&quot;:&quot;cypress\\reports\\html\\.jsons&quot;},&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;index.html&quot;,&quot;reportDir&quot;:&quot;C:\\Users\\USER\\Desktop\\task-2\\Almosafer-task\\cypress\\reports\\html&quot;,&quot;reportTitle&quot;:&quot;Almosafer-task&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:false,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;C:\\Users\\USER\\Desktop\\task-2\\Almosafer-task\\cypress\\reports\\html\\assets&quot;,&quot;htmlFile&quot;:&quot;C:\\Users\\USER\\Desktop\\task-2\\Almosafer-task\\cypress\\reports\\html\\index.html&quot;}"><div id="report"></div><script src="assets\app.js"></script></body></html>